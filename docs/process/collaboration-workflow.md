# Claude Code との協働ワークフロー

## 概要

Claude Code と効果的に協働するための標準的なワークフローとコミュニケーション方法を定義します。

## 基本的な協働原則

### 1. 明確なコミュニケーション

#### 要求の明確化
- **具体的な目標設定**: 何を実装したいかを明確に
- **制約条件の提示**: 技術的制約、時間的制約、品質要件
- **成功条件の定義**: 完了の判断基準を明確に

#### 文脈の共有
- **プロジェクト背景**: 目的、ユーザー、技術環境
- **既存コードの説明**: 現在の実装状況、依存関係
- **設計方針の共有**: アーキテクチャ、コーディング規約

### 2. 段階的な開発アプローチ

#### 小さな単位での実装
- 機能を小さな単位に分割
- 1つずつ実装・検証・改善のサイクル
- 継続的なフィードバック

#### テスト駆動開発
- 要件をテストコードで表現
- テスト → 実装 → リファクタリングのサイクル
- 品質の継続的な確保

## 協働フェーズ別ワークフロー

### Phase 1: プロジェクト開始

#### 実施項目
1. **プロジェクト概要の共有**
   - 目的と背景の説明
   - 主要な機能要件の整理
   - 技術的制約の確認

2. **開発環境の準備**
   - プロジェクト構造の決定
   - 必要なツール・ライブラリの選定
   - 初期設定の実装

3. **開発方針の合意**
   - コーディング規約の確認
   - テスト戦略の決定
   - ブランチ戦略の設定

#### 成果物
- プロジェクト初期設定
- 開発環境構築完了
- 基本的な構造とツール設定

### Phase 2: 機能開発

#### 開発サイクル
1. **機能仕様の詳細化**
   - ユーザーストーリーの作成
   - 受け入れ条件の定義
   - 技術的要件の整理

2. **設計・実装**
   - アーキテクチャ設計
   - テストコード作成
   - 機能実装

3. **検証・改善**
   - 動作確認
   - コードレビュー
   - パフォーマンス検証

#### コミュニケーションパターン
- **機能要求**: 具体的な動作とUI/UXの説明
- **技術相談**: 実装方針や技術選択の相談
- **コードレビュー**: 実装内容の確認と改善提案

### Phase 3: 統合・最適化

#### 実施項目
1. **機能統合**
   - 個別機能の統合
   - エンドツーエンドテスト
   - 統合課題の解決

2. **パフォーマンス最適化**
   - ボトルネック分析
   - 最適化実装
   - 効果測定

3. **品質向上**
   - セキュリティ検証
   - アクセシビリティ確認
   - エラーハンドリング強化

## 効果的なコミュニケーション方法

### 1. 要求の伝え方

#### 良い例
```
【目標】
ユーザー認証機能を実装したい

【具体的な要件】
- メールアドレスとパスワードでのログイン
- JWT トークンによるセッション管理
- パスワードリセット機能
- ログイン状態の永続化

【技術的制約】
- React + TypeScript で実装
- バックエンドは Node.js + Express
- データベースは PostgreSQL

【成功条件】
- ログイン・ログアウトが正常に動作
- 未認証時はログインページにリダイレクト
- セキュリティ要件（HTTPS、セッション管理）を満たす
```

#### 避けるべき例
```
【曖昧な要求】
ログイン機能を作って

【制約条件不明】
なんとなく認証できればいい

【成功条件未定義】
動けばいい
```

### 2. フィードバックの方法

#### 建設的なフィードバック
- **具体的な指摘**: どの部分をどう改善したいか
- **代替案の提示**: 改善方向性の具体例
- **理由の説明**: なぜその改善が必要か

#### 例
```
【フィードバック】
エラーハンドリングの部分で、具体的なエラーメッセージを
ユーザーに表示したい

【具体的な改善案】
- バリデーションエラー: フィールド別エラーメッセージ
- サーバーエラー: ユーザーフレンドリーなメッセージ
- ネットワークエラー: 再試行案内

【理由】
現在は汎用的なエラーメッセージのため、ユーザーが
問題の解決方法を理解できない
```

### 3. 進捗確認の方法

#### 定期的なチェックポイント
- 機能単位での動作確認
- 中間成果物のレビュー
- 方向性の再確認

#### 確認項目
- 実装した機能の動作
- 予期しない問題の発生
- 次のステップの計画

## トラブルシューティング

### よくある問題と対処法

#### 要件の理解齟齬
- **原因**: 曖昧な説明、前提知識の差
- **対処**: 具体例の提示、プロトタイプでの確認

#### 技術的課題
- **原因**: 予期しない技術的制約、ライブラリの制限
- **対処**: 代替案の検討、段階的な解決アプローチ

#### 品質課題
- **原因**: テスト不足、エッジケース未考慮
- **対処**: テストカバレッジ向上、ユースケース拡張

## 関連ドキュメント

- [プロジェクト企画ガイド](./project-planning.md)
- [設計判断プロセス](./design-decisions.md)
- [プロジェクトライフサイクル](./project-lifecycle.md)
- [開発ワークフロー](../standards/development-workflow.md)